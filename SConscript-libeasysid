import os
import sys
import tarfile

Import("env")

easysidenv = Environment()

easysidenv["ENV"]["PROCESSOR_ARCHITECTURE"] = env["ENV"]["PROCESSOR_ARCHITECTURE"]
easysidenv["ENV"]["PROCESSOR_ARCHITEW6432"] = env["ENV"]["PROCESSOR_ARCHITEW6432"]

if not os.path.exists("external/easysid-version-1.0/SConstruct"):
    tarfile.open("external/easysid-version-1.0.tar.gz").extractall("external")
libeasysid = easysidenv.Command("external/easysid-version-1.0/libeasysid"+easysidenv["SHLIBSUFFIX"], "external/easysid-version-1.0/SConstruct", "cd external/easysid-version-1.0 && " + sys.executable + " " + sys.argv[0])

Return(["libeasysid"])
