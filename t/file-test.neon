IMPORT file

ASSERT file.Separator IN ["/", "\\"]

VAR a: Array<String>

a := file.readLines("LICENSE.txt")
print(str(a.size()))
%= 21
print(a[0])
%= The MIT License (MIT)

VAR buf: Bytes
buf := file.readBytes("LICENSE.txt")
print(strb(buf.size() = 1076 OR buf.size() = 1097)) % account for lf vs crlf
%= TRUE
VAR arr: Array<Number> := buf.toArray()
print("\(arr[0])")
%= 84

print(strb(file.isDirectory("t")))
%= TRUE

a := file.files("t")
print(strb("file-test.neon" IN a))
%= TRUE

file.writeLines("tmp/file-test.tmp", ["hello", "world"])
print(strb(file.exists("tmp/file-test.tmp")))
%= TRUE
file.delete("tmp/file-test.tmp")
print(strb(file.exists("tmp/file-test.tmp")))
%= FALSE
file.delete("tmp/file-test.tmp") % No exception expected.

file.writeLines("tmp/file-test.tmp", ["hello", "world"])
file.delete("tmp/file-test2.tmp")
file.rename("tmp/file-test.tmp", "tmp/file-test2.tmp")
print(strb(file.exists("tmp/file-test.tmp")))
%= FALSE
print(strb(file.exists("tmp/file-test2.tmp")))
%= TRUE

file.copyOverwriteIfExists("tmp/file-test2.tmp", "tmp/file-test3.tmp")
print(strb(file.exists("tmp/file-test2.tmp")))
%= TRUE
print(strb(file.exists("tmp/file-test3.tmp")))
%= TRUE

file.mkdir("tmp/foo")
print(strb(file.isDirectory("tmp/foo")))
%= TRUE
file.writeLines("tmp/foo/bar.txt", ["hello", "world"])
TRY
    file.removeEmptyDirectory("tmp/foo")
EXCEPTION file.FileException DO
    print("ok")
END TRY
%= ok
file.delete("tmp/foo/bar.txt")
file.removeEmptyDirectory("tmp/foo")
print(strb(file.isDirectory("tmp/foo")))
%= FALSE

file.mkdir("tmp/foo")
print(strb(file.isDirectory("tmp/foo")))
%= TRUE
file.writeLines("tmp/foo/bar.txt", ["hello", "world"])
file.removeDirectoryTree("tmp/foo")
print(strb(file.isDirectory("tmp/foo")))
%= FALSE

print(file.pathJoin("a", "b"))
%? a[/\\]b
print(file.pathJoin("a", "/b"))
%= /b

VAR directory, name: String
file.pathSplit("a", OUT directory, OUT name)
print("\(directory) \(name)")
%=  a
file.pathSplit("a/b", OUT directory, OUT name)
print("\(directory) \(name)")
%= a b
