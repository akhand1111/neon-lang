IMPORT runtime

TYPE Node := RECORD
    value: Number
END RECORD

VAR a, b: POINTER TO Node

runtime.set_garbage_collection_interval(1)

% Simple collection.
ASSERT runtime.get_allocated_object_count() = 0
a := NEW Node
ASSERT runtime.get_allocated_object_count() = 1
a := NIL
runtime.garbage_collect()
ASSERT runtime.get_allocated_object_count() = 0
b := NEW Node
ASSERT runtime.get_allocated_object_count() = 1
